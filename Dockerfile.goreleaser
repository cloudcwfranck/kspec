# Dockerfile for GoReleaser
# GoReleaser builds the binary first, so this just packages the pre-built binary

FROM gcr.io/distroless/static:nonroot

WORKDIR /

# Copy the pre-built binary from GoReleaser build context
COPY manager /manager

# Use non-root user (distroless nonroot UID: 65532)
USER 65532:65532

# Expose ports for metrics and health probes
EXPOSE 8080 8081

# Set entrypoint
ENTRYPOINT ["/manager"]
